// Gnome-shell extensions styling, especially for Dash-to-dock and Dash-to-panel
// NEEDS HELP TO MAKE IT PERFECT

/* Dash to dock */
#dashtodockContainer {
	.dash-item-container {
		.app-well-app-running-dot {
			width: 8px;
  		height: 4px;
			margin: 1px;
			border-radius: 32px;

			background-color: if($variant == 'light', rgba(black, 0.6), rgba(white, 0.6));
		}

		> StWidget.focused .app-well-app-running-dot {
			width: 16px;
			background-color: $fg_color;
		}

		.show-apps .show-apps-icon {
			color: if($variant == 'light', $fg_color, $dark_fg_color);
			background-color: if($variant == 'light', rgba(white, 0.5), rgba(black, 0.3));
			box-shadow: inset 0 0 0 1px if($variant == 'light', rgba(black, 0.4), $borders_color);
			border-radius: 3px;
		}

		.show-apps:hover .show-apps-icon {
			background-color: if($variant == 'light', rgba(white, 0.65), rgba(black, 0.15));
		}

		.show-apps:checked .show-apps-icon {
			background-color: if($variant == 'light', rgba(black, 0.1), $selected_bg_color);
			box-shadow: inset 0 0 0 1px if($variant == 'light', rgba(black, 0.4), $borders_color);
		}

		.app-well-app .overview-icon,
		.show-apps .overview-icon {
			padding: 6px;
			background-color: transparent;
			box-shadow: none;
		}

		.app-well-app:hover .overview-icon {
			background-color: if($variant == 'dark' and $light-panel == 'false', rgba(white, 0.10), rgba(black, 0.10));
		}

		.app-well-app.focused .overview-icon {
			background-color: if($variant == 'dark' and $light-panel == 'false', rgba(white, 0.15), rgba(black, 0.15));
		}
	}
}

@each $pos, $padding, $radius, $image, $margin_pos in ('.top', '0 4px', '0', 'top', 'bottom'),
																 				 							('.bottom', '0 4px', '0', 'bottom', 'top'),
																 			 	 							('.left', '4px', '3px', 'left', 'right'),
																 			 	 							('.right', '4px', '3px', 'right', 'left') {
	#dashtodockContainer#{$pos} {
		#dash {
			border-image: url("assets/dash/dash-#{$image}.svg") 7;
			border: 1px solid transparent;
			border-#{$image}-width: 0;
		}

		&.extended #dash {
			border-image: url("assets/dash/dash-#{$image}-extended.svg") 7;
		}

		.dash-item-container > StWidget {
			padding: #{$padding};
		}

		.app-well-app .overview-icon,
		.show-apps .overview-icon {
			border: 0;
			border-radius: #{$radius};

			@if $version > 3.31 {
				margin-#{$margin_pos}: 1px;
			}
		}
	}
}

/* Dash to Panel */
/* NOTE: new version of DtP seems ignores image asset, only works in old version */
/* or version that before panel opacity customization feature introducted */
#panel.dashtopanelMainPanel {
	&.dashtopanelTop {
		@if ($version > 3.25) and ($version < 3.31) {
			border-image: url("assets/panel-top.svg") 4;
		}
		@else {
			border-image: url("assets/panel-top.svg") 4;
		}

		@if ($version > 3.25) and ($version < 3.31) {
			&.solid {
				border-image: url("assets/panel-top.svg") 4;
			}
		}
	}

	&.dashtopanelBottom {
		@if ($version > 3.25) and ($version < 3.31) {
			border-image: url("assets/panel-bottom.svg") 4;
		}
		@else {
			border-image: url("assets/panel-bottom.svg") 4;
		}

		.panel-button {
			&:active, &:overview, &:focus, &:checked {
				box-shadow: inset 0 -2px 0px lighten($selected_bg_color,5%);
			}
		}

		@if ($version > 3.25) and ($version < 3.31) {
			&.solid {
				border-image: url("assets/panel-bottom.svg") 4;
			}
		}
	}

	.show-apps .overview-icon {
		color: if($light-panel == 'false', $dark_fg_color, $fg_color);
		border: 0;
	}

	.show-apps:hover .overview-icon {
		background-color: if($light-panel == 'false', rgba(white, 0.03), rgba(black, 0.05));
	}
}
